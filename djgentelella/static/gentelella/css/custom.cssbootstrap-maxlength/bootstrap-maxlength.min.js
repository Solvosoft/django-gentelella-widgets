!function(m){"use strict";m.event.special.destroyed||(m.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}),m.fn.extend({maxlength:function(p,t){var e=m("body");function r(t){var e=t.charCodeAt();return e?e<128?1:e<2048?2:3:0}function i(t){return t.split("").map(r).concat(0).reduce(function(t,e){return t+e})}function h(t){var e=t.val();e=p.twoCharLinebreak?e.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):e.replace(/(?:\r\n|\r|\n)/g,"\n");return p.utf8?i(e):e.length}function l(t,e){return e-h(t)}function f(t,e){e.css({display:"block"}),t.trigger("maxlength.shown")}function u(t,e,a){var n="";return p.message?n="function"==typeof p.message?p.message(t,e):p.message.replace("%charsTyped%",a).replace("%charsRemaining%",e-a).replace("%charsTotal%",e):(p.preText&&(n+=p.preText),p.showCharsTyped?n+=a:n+=e-a,p.showMaxLength&&(n+=p.separator+e),p.postText&&(n+=p.postText)),n}function c(t,e,a,n){var o,s,r,i,l,c;n&&(n.html(u(e.val(),a,a-t)),0<t?(r=e,i=p.threshold,l=a,c=!0,!p.alwaysShow&&l-h(r)>i&&(c=!1),c?f(e,n.removeClass(p.limitReachedClass).addClass(p.warningClass)):(o=e,s=n,p.alwaysShow||(s.css({display:"none"}),o.trigger("maxlength.hidden")))):f(e,n.removeClass(p.warningClass).addClass(p.limitReachedClass))),p.customMaxAttribute&&(t<0?e.addClass("overmax"):e.removeClass("overmax"))}function d(t,e){var a,n,o=(n=(a=t)[0],m.extend({},"function"==typeof n.getBoundingClientRect?n.getBoundingClientRect():{width:n.offsetWidth,height:n.offsetHeight},a.offset()));if("function"!==m.type(p.placement))if(m.isPlainObject(p.placement))!function(t,e){if(t&&e){var n={};m.each(["top","bottom","left","right","position"],function(t,e){var a=p.placement[e];void 0!==a&&(n[e]=a)}),e.css(n)}}(p.placement,e);else{var s=t.outerWidth(),r=e.outerWidth(),i=e.width(),l=e.height();switch(p.appendToParent&&(o.top-=t.parent().offset().top,o.left-=t.parent().offset().left),p.placement){case"bottom":e.css({top:o.top+o.height,left:o.left+o.width/2-i/2});break;case"top":e.css({top:o.top-l,left:o.left+o.width/2-i/2});break;case"left":e.css({top:o.top+o.height/2-l/2,left:o.left-i});break;case"right":e.css({top:o.top+o.height/2-l/2,left:o.left+o.width});break;case"bottom-right":e.css({top:o.top+o.height,left:o.left+o.width});break;case"top-right":e.css({top:o.top-l,left:o.left+s});break;case"top-left":e.css({top:o.top-l,left:o.left-r});break;case"bottom-left":e.css({top:o.top+t.outerHeight(),left:o.left-r});break;case"centered-right":e.css({top:o.top+l/2,left:o.left+s-r-3});break;case"bottom-right-inside":e.css({top:o.top+o.height,left:o.left+o.width-r});break;case"top-right-inside":e.css({top:o.top-l,left:o.left+s-r});break;case"top-left-inside":e.css({top:o.top-l,left:o.left});break;case"bottom-left-inside":e.css({top:o.top+t.outerHeight(),left:o.left})}}else p.placement(t,e,o)}function g(t){var e=t.attr("maxlength")||p.customMaxAttribute;if(p.customMaxAttribute&&!p.allowOverMax){var a=t.attr(p.customMaxAttribute);(!e||a<e)&&(e=a)}return e=e||t.attr("size")}return m.isFunction(p)&&!t&&(t=p,p={}),p=m.extend({showOnReady:!1,alwaysShow:!0,threshold:0,warningClass:"small form-text text-muted",limitReachedClass:"small form-text text-danger",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom-right-inside",message:null,showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,customMaxAttribute:null,allowOverMax:!1},p),this.each(function(){var n,o,s=m(this);function t(){var t=u(s.val(),n,"0");n=g(s),o=o||m('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(t),s.is("textarea")&&(s.data("maxlenghtsizex",s.outerWidth()),s.data("maxlenghtsizey",s.outerHeight()),s.mouseup(function(){s.outerWidth()===s.data("maxlenghtsizex")&&s.outerHeight()===s.data("maxlenghtsizey")||d(s,o),s.data("maxlenghtsizex",s.outerWidth()),s.data("maxlenghtsizey",s.outerHeight())})),p.appendToParent?(s.parent().append(o),s.parent().css("position","relative")):e.append(o),c(l(s,g(s)),s,n,o),d(s,o)}m(window).resize(function(){o&&d(s,o)}),p.showOnReady?s.ready(function(){t()}):s.focus(function(){t()}),s.on("maxlength.reposition",function(){d(s,o)}),s.on("destroyed",function(){o&&o.remove()}),s.on("blur",function(){o&&!p.showOnReady&&o.remove()}),s.on("input",function(){var t=g(s),e=l(s,t),a=!0;return p.validate&&e<0?(function(t,e){var a=t.val();if(p.twoCharLinebreak&&"\n"===(a=a.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"))[a.length-1]&&(e-=a.length%2),p.utf8){for(var n=a.split("").map(r),o=0,s=i(a)-e;o<s;o+=n.pop());e-=e-n.length}t.val(a.substr(0,e))}(s,t),a=!1):c(e,s,n,o),("bottom-right-inside"===p.placement||"top-right-inside"===p.placement||"function"==typeof p.placement||p.message&&"function"==typeof p.message)&&d(s,o),a})})}})}(jQuery);